var numberStage,numberStageCtx,numberOffsetX,numberOffsetY,stage,stageCtx,number,numberPixelCoordinates,numberStageWidth=680,numberStageHeight=420,stageWidth=window.innerWidth,stageHeight=window.innerHeight,stageCenterX=stageWidth/2,stageCenterY=stageHeight/2,countdownFrom=10,countdownTimer=2e3,countdownRunning=!0,dots=[],circleRadius=2,colors=["61, 207, 236","255, 244, 174","255, 211, 218","151, 211, 226","168,198,251","198,161,247"];function init(){numberStage=document.getElementById("canvas-number"),numberStageCtx=numberStage.getContext("2d"),numberStage.width=numberStageWidth,numberStage.height=numberStageHeight,stage=document.getElementById("canvas-dots"),stageCtx=stage.getContext("2d"),stage.width=stageWidth,stage.height=stageHeight,numberOffsetX=(stageWidth-numberStageWidth)/2,numberOffsetY=(stageHeight-numberStageHeight)/2}function Dot(e,t,n,o){var a=this;a.x=e,a.y=t,a.color=n,a.alpha=o,this.draw=function(){stageCtx.beginPath(),stageCtx.arc(a.x,a.y,circleRadius,0,2*Math.PI,!1),stageCtx.fillStyle="rgba("+a.color+", "+a.alpha+")",stageCtx.fill()}}init();for(var i=0;i<2240;i++){var dot=new Dot(randomNumber(0,stageWidth),randomNumber(0,stageHeight),colors[randomNumber(1,colors.length)],.3);dots.push(dot),tweenDots(dot,"","space")}function countdown(){drawNumber(countdownFrom.toString()),0===countdownFrom&&(countdownRunning=!1,drawNumber("â™¥")),countdownFrom--}function loop(){stageCtx.clearRect(0,0,stageWidth,stageHeight);for(var e=0;e<dots.length;e++)dots[e].draw(stageCtx);requestAnimationFrame(loop)}function drawNumber(e){numberStageCtx.clearRect(0,0,numberStageWidth,numberStageHeight),numberStageCtx.fillStyle="#24282f",numberStageCtx.textAlign="center",numberStageCtx.font="bold 418px Lato",numberStageCtx.fillText(e,340,400);var t=document.getElementById("canvas-number").getContext("2d").getImageData(0,0,numberStageWidth,numberStageHeight).data;numberPixelCoordinates=[];for(var n=t.length;n>=0;n-=4)if(0!==t[n]){var o=n/4%numberStageWidth,a=Math.floor(Math.floor(n/numberStageWidth)/4);o&&o%(2*circleRadius+3)==0&&a&&a%(2*circleRadius+3)==0&&numberPixelCoordinates.push({x:o,y:a})}formNumber()}function formNumber(){for(var e=0;e<numberPixelCoordinates.length;e++)tweenDots(dots[e],numberPixelCoordinates[e],"");countdownRunning&&countdownFrom>0&&setTimeout((function(){breakNumber()}),countdownTimer)}function breakNumber(){for(var e=0;e<numberPixelCoordinates.length;e++)tweenDots(dots[e],"","space");countdownRunning&&setTimeout((function(){countdown()}),countdownTimer)}function tweenDots(e,t,n){"space"===n?TweenMax.to(e,3+Math.round(100*Math.random())/100,{x:randomNumber(0,stageWidth),y:randomNumber(0,stageHeight),alpha:.3,ease:Cubic.easeInOut,onComplete:function(){tweenDots(e,"","space")}}):TweenMax.to(e,1.5+Math.round(100*Math.random())/100,{x:t.x+numberOffsetX,y:t.y+numberOffsetY,delay:0,alpha:1,ease:Cubic.easeInOut,onComplete:function(){}})}function randomNumber(e,t){return Math.floor(Math.random()*(t-e)+e)}countdown(),loop();